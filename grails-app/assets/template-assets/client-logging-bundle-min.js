window.dctk=window.dctk||{};(function(B,m,p){if(m.enabled==null){m.enabled=true}if(!m.enabled){return}var D="//cl.expedia.com/1x1.gif",h="//cl.expedia.com/2x2.gif",J={},n=[];var E=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:B.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];var C=[{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Kindle",identity:"Kindle"},{string:navigator.userAgent,subString:"BB10",identity:"Blackberry"},{string:navigator.userAgent,subString:"Touch",addlString:"MSIE 10",identity:"Surface"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];var a=["www.expedia.com","www.expedia.co.uk","www.expedia.ca","www.expedia.de","www.expedia.it","www.expedia.es","www.expedia.nl","www.expedia.mx","www.expedia.com.sg","www.expedia.com.my","www.expedia.co.kr","www.expedia.co.th","www.expedia.com.hk","www.expedia.fr","www.expedia.com.au","www.expedia.co.in","www.expedia.co.jp","www.expedia.co.nz","www.expedia.co.id","www.expedia.com.tw","www.expedia.ie","www.expedia.be","www.expedia.se","www.expedia.no","www.expedia.dk","www.expedia.com.ph","www.expedia.com.br","www.expedia.com.ar","www.expedia.com.vn","www.expedia.fi","www.expedia.at","expedia.viaggi.virgilio.it","expedia.viaggi.tiscali.it","expedia.corriere.it","expedia.viaggi.deejay.it","expedia.allmusic.tv","voyages.anyway.com","yahoo.expedia.com.au","ninemsn.expedia.com.au","jal.expedia.co.jp","msn.expedia.co.jp","expedia-aarp.com","voyage-sncf.com","expediafortd.com","vacation.hotwire.com","www.travelocity.com","www.travelocity.ca","xsell.expedia.com"];var K={};var u=function(O){for(var L=0;L<O.length;L++){var M=O[L].string;var N=O[L].prop;m.versionSearchString=O[L].versionSearch||O[L].identity;if(M){if(M.indexOf(O[L].subString)!=-1&&(!O[L].addlString||M.indexOf(O[L].addlString)!=-1)){return O[L].identity||"unknown"}}else{if(N){return O[L].identity||"unknown"}}}};var j=function(L){var i=L.indexOf(m.versionSearchString);if(i==-1){return}return parseFloat(L.substring(i+m.versionSearchString.length+1))};var z=function(O,M){for(var N=0,L=M.length;N<L;N++){if(O===M[N]){return true}}return false};var v=function(i){if(i.toISOString){return i.toISOString()}else{return i.getFullYear().toString()+"-"+i.getMonth()+"-"+i.getDate()+"T"+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()}};var o=function(M,Q){var L=false,P=true,S=M.document,R=S.documentElement,V=S.addEventListener?"addEventListener":"attachEvent",T=S.addEventListener?"removeEventListener":"detachEvent",i=S.addEventListener?"":"on",U=function(W){if(W.type=="readystatechange"&&S.readyState!="complete"){return}(W.type=="load"?M:S)[T](i+W.type,U,false);if(!L&&(L=true)){Q.call(M,W.type||W)}},O=function(){try{R.doScroll("left")}catch(W){setTimeout(O,50);return}U("poll")};if(S.readyState=="complete"){Q.call(M,"lazy")}else{if(S.createEventObject&&R.doScroll){try{P=!M.frameElement}catch(N){}if(P){O()}}S[V](i+"DOMContentLoaded",U,false);S[V](i+"readystatechange",U,false);M[V](i+"load",U,false)}};var l=function(M,L,i){if(M.attachEvent){M["e"+L+i]=i;M[L+i]=function(){M["e"+L+i](B.event)};M.attachEvent("on"+L,M[L+i])}else{M.addEventListener(L,i,false)}};var q=function(L){var i=new Image();i.src=D+g+"&guid="+G()+"&logTime="+v(new Date())+"&action=logTrxEvent&"+L.join("&");t.push(i)};var G=function(){return m.guid||"unknown"};var b=function(L){var i=new Image();i.src=h+g+"&guid="+G()+"&logTime="+v(new Date())+"&action=logErrors&"+L.join("&");t.push(i)};var k=function(){if("performance" in B){var i=B.performance.timing;K.unloadTime=i.unloadEventEnd-i.unloadEventStart;K.redirectTime=i.redirectEnd-i.redirectStart;K.dnsTime=i.domainLookupEnd-i.domainLookupStart;K.connectionTime=i.connectEnd-i.connectStart;K.requestTime=i.responseStart-i.requestStart;K.responseTime=i.responseEnd-i.responseStart;K.parsingTime=i.domInteractive-i.domLoading;K.domReadyCallbackTime=i.domContentLoadedEventEnd-i.domContentLoadedEventStart;K.onLdCallbackTime=i.loadEventEnd-i.loadEventStart;K.processingTime=i.domComplete-i.domLoading;K.navigationToResponse=i.responseStart-i.navigationStart;K.navigationToDomContentLoaded=i.domContentLoadedEventStart-i.navigationStart;K.navigationToOnLd=i.loadEventStart-i.navigationStart;K.fetchToResponse=i.responseStart-i.fetchStart;K.fetchToDomContentLoaded=i.domContentLoadedEventStart-i.fetchStart;K.fetchToOnLd=i.loadEventStart-i.fetchStart;K.responseToDomContentLoaded=i.domContentLoadedEventStart-i.responseStart;K.responseToOnLd=i.loadEventStart-i.responseStart}return K};var e=function(){var i=[];if("responseToOnLd" in K){for(var L in K){if(K.hasOwnProperty(L)){i.push(L+"="+K[L])}}if(i.length>0){dctk.logging.logTrxEvent("navTiming",i.join("&"))}}};var d=u(E);var H=j(navigator.userAgent)||j(navigator.appVersion)||"an unknown version";var r=B.location.hostname;var c=z(r,a);var s=u(C);var x,I="";var A=[];function f(N){var L="NA",M=L,i=L,P=L,O;try{if(N&&N.stack){O=N.stack.match(/\(([^\)]+\d+)\)/);if(!O){O=N.stack.match(/@([^\)]+\d+)\n/)}if(O){O=O[1].split(":");M=O.pop();i=O.pop();P=O.join(":")}}}catch(Q){}if(N){N={sourceURL:N.sourceURL||N.fileName||P,line:N.line||N.lineNumber||i,col:N.columnNumber||M,message:N.message,stack:N.stack||L}}return N}if(m.logKey&&m.logKey.indexOf("%7C")!=-1){x=m.logKey.split("%7C")[0]}else{if(m.logKey&&m.logKey.indexOf("|")!=-1){x=m.logKey.split("|")[0]}else{x="undefined"}}if(m.data){for(var F=0,w=m.data.split("|");F<w.length&&w[F].length>0;F++){I+="&"+w[F]}}var t=[],g="?browser="+d+"&browserVersion="+H+"&platform="+s+"&domain="+r+"&live="+c+"&pageName="+x+"&logKey="+m.logKey+I,y;if("performance" in B){l(B,"load",function(){B.setTimeout(function(){dctk.logging.navTiming=k();e()},1000)});m.pageStartTime=B.performance.timing.responseStart}else{m.pageStartTime=m.pageStartTime||new Date().getTime();l(B,"load",function(){var i=A.concat(["responseToOnLd="+(new Date().getTime()-m.pageStartTime)]);q(i)});o(B,function(){A=["responseToDomContentLoaded="+(new Date().getTime()-m.pageStartTime)]})}m.navTiming=K;m.browser=d;m.version=H;m.OS=s;m.trxEventWrapper=function(M,i,L){y=this;return function(){var P=new Date().getTime();var N=M.apply((L?L:this),arguments);var O=new Date().getTime();q([i+"_elapsedTime="+(O-m.pageStartTime),"clEventName01="+i,"clEventTime01="+(O-P)]);return N}};m.logTrxEvent=function(i,L){var M=[i+"_elapsedTime="+(new Date().getTime()-m.pageStartTime)];if(L&&L.length>0){M=M.concat(L)}q(M)};m.logMessage=function(i,L){var N=["label="+i,i+"_elapsedTime="+(new Date().getTime()-m.pageStartTime)],M;if(L&&L.length>0){N=N.concat(L)}if(i==="windowOnError"){M=L[0];if(!(M in J)){J[M]={count:0};b(N)}J[M].count=parseInt(J[M].count,10)+1;if(J[M].count===100){b(N.concat("exceedsErrorThreshold=true"))}}else{b(N)}};m.logError=function(N,L,i){var M=[];N=N||"unknownError";L=L||new Error("Unknown error");if("[object Array]"===Object.prototype.toString.call(i)){M.concat(i)}L=f(L);if(L){M.push("onErrorMsg="+L.message);M.push("onErrorLine="+L.line);M.push("onErrorChar="+L.col);M.push("onErrorUrl="+encodeURIComponent(L.sourceURL));if(L.stack){M.push("stack="+encodeURIComponent(L.stack.substr(0,200)))}}else{M.push("onError=NA")}M.push("pageUrl="+encodeURIComponent(B.location.href));M.push("clientWidth="+document.documentElement.clientWidth);if(B.console){if(typeof console.error==="function"){console.error(N+": "+M.join("|"))}else{if(typeof console.log==="function"){console.log(N+": "+M.join("|"))}}}m.logMessage(N,M)};m.reset=function(){m.pageStartTime=new Date().getTime()};m.subscribeToOnerrorCallback=function(i){n.push(i)};m.publishOnerrorCallback=function(){for(var L=0;L<n.length;L++){if(typeof(n[L])==="function"){n[L]()}}}})(window,window.dctk.logging=window.dctk.logging||{});window.onerror=function(d,b,a){var c=0;if(document.documentElement){c=document.documentElement.clientWidth}d=d.replace(/\'/ig,"`");d=escape(d);dctk.logging.logMessage("windowOnError",["onErrorMsg="+d,"onErrorUrl="+encodeURIComponent(b),"onErrorLine="+a,"clientWidth="+c]);dctk.logging.publishOnerrorCallback()};window.dctk=window.dctk||{};(function(c,b,a,d){a.trxEventWrapper=function(g,e,f){if(b&&b.trxEventWrapper){return b.trxEventWrapper(g,e,f)}else{return g}};a.logTrxEvent=function(e,f){if(b&&b.logTrxEvent){a.logTrxEvent=b.logTrxEvent;b.logTrxEvent(e,f)}else{a.logTrxEvent=function(){}}};a.logMessage=function(e,f){if(b&&b.logMessage){a.logMessage=b.logMessage;b.logMessage(e,f)}else{a.logMessage=function(){}}};a.logError=function(g,f,e){if(b&&b.logError){a.logError=b.logError;b.logError(g,f,e)}else{a.logError=function(){return d}}};a.subscribeToOnerrorCallback=function(e){if(b&&b.subscribeToOnerrorCallback){a.subscribeToOnerrorCallback=b.subscribeToOnerrorCallback;b.subscribeToOnerrorCallback(e)}else{b.subscribeToOnerrorCallback=function(){}}}})(window,window.dctk.logging,window.dctk.loggingAdapter=window.dctk.loggingAdapter||{});